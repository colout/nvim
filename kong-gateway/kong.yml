_format_version: "3.0"
services:
- name: bedrock-rag-service
  host: httpbin.default
  port: 8000
  routes:
  - name: bedrock-rag-route1
    paths:
    - /bedrock-route
    plugins:
    - name: ai-proxy
      instance_name: "ai-proxy-bedrock-rag"
      enabled: true
      config:
        auth:
          param_name: "allow_override"
          param_value: "false"
          param_location: "body"
        route_type: "llm/v1/chat"
        model:
          provider: "bedrock"
          options:
            bedrock:
              aws_region: "us-east-1"
    - name: ai-prompt-decorator
      instance_name: ai-prompt-decorator-rag
      enabled: false
      config:
        prompts:
          prepend:
          - role: system
            content: "You will always respond in the Portuguese (Brazil) language."
    - name: key-auth
      instance_name: key-auth-bedrock
      enabled: true
consumers:
- keyauth_credentials:
  - key: "123456"
  username: user1
